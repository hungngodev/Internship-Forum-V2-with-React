<link rel="stylesheet" href="/stylesheets/navbar.css" />
<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid" >
    <a class="navbar-brand" href="#">Internship Forum</a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarNavAltMarkup"
      aria-controls="navbarNavAltMarkup"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a class="nav-link" href="/">Home</a>
        <a class="nav-link" href="/internships">Internships</a>
        <a class="nav-link" href="/statistics">Statistics</a>
        <a class="nav-link" href="/internships/new">New Internship</a>
        <% if(currentUser) {%>
        <a class="nav-link" href="/profile/<%= currentUser._id %>"
          >Your Profile</a
        >
        <% } %>
      </div>
      <div class="navbar-nav ml-auto">
        <div id="formSearch">
            <form
            class="form-inline d-flex validated-form"
            id="searchForm"
            action="/internships/search"
            method="GET"
            novalidate
            class="validated-form"
          >
            <input
              class="form-control mr-sm-2 w-100"
              type="text"
              placeholder="Search"
              id="search"
              aria-label="Search"
              name="q" required
            />
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-search searchIconabc"
                viewBox="0 0 16 16"
              >
                <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"
                />
              </svg>
            </button>
          </form>
        </div>
        <% if(!currentUser) {%>
        <a class="nav-link" href="/login">Login</a>
        <a class="nav-link" href="/register">Register</a>
        <% } else {%>
        <a class="nav-link" href="/logout">Logout</a>
        <% } %>
      </div>
    </div>
  </div>
</nav>
<script>
  console.log(window.location.href);
  const url = window.location.href;
  let index = url.indexOf("/profile/");
  let extracted = url.slice(index + "/profile/".length);
  let searchURL = "/profile/" + extracted + "/search";
  if (url.includes("statistics")) {
    document.getElementById( 'formSearch' ).style.display = 'none';
  }
  console.log(searchURL);
  if (window.location.href.includes("profile")) {
    document.getElementById("searchForm").action = searchURL;
  }
</script>
